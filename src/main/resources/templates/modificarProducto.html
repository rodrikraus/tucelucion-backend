<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Modificar producto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div th:replace="~{fragments/navbar :: adminNavbar}"></div>
    <div class="container mt-5">
        <h4 class="text-center">Actualizar producto</h4>
        <hr>
        <form id="productForm" action="/productos/guardarModificacionProducto" method="post" th:object="${producto}">
            <input type="hidden" th:field="*{id}" />

            <div class="mb-3">
                <label for="name" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="name" th:field="*{name}" required>
            </div>

            <div class="mb-3">
                <label for="price" class="form-label">Precio</label>
                <input type="number" step="0.01" class="form-control" id="price" th:field="*{price}" required>
            </div>

            <div class="mb-3">
                <label for="stock" class="form-label">Stock</label>
                <input type="number" class="form-control" id="stock" th:field="*{stock}" required>
            </div>

            <div class="mb-3">
                <label for="description" class="form-label">Descripci√≥n</label>
                <textarea class="form-control" id="description" rows="3" th:field="*{description}" required></textarea>
            </div>

            <div class="mb-3">
                <label for="imageUrl" class="form-label">URL de la imagen</label>
                <input type="text" class="form-control" id="imageUrl" th:field="*{imageUrl}">
            </div>

            <div class="mb-3">
                <label for="tags" class="form-label">Tags</label>
                <textarea class="form-control" id="tags" rows="3" th:field="*{tags}" required></textarea>
            </div>

            <div class="mb-3">
                <label for="productCategory" class="form-label">Category</label>
                <input type="text" class="form-control" id="productCategory" th:field="*{productCategory}">
            </div>


            <div class="text-center">
                <button type="submit" class="btn btn-primary">Actualizar</button>
                <a href="/productos" class="btn btn-secondary ms-2">Cancelar</a>
            </div>
        </form>
    </div>
    <script>
        document.getElementById('productForm').addEventListener('submit', function(event) {
            const imageUrl = document.getElementById('imageUrl').value.trim();
            const validExtensions = /\.(jpg|jpeg|png|gif|bmp|webp)$/i;

            if (imageUrl && !validExtensions.test(imageUrl)) {
                alert("La URL de la imagen debe terminar en .jpg, .jpeg, .png, .gif, .bmp o .webp");
                event.preventDefault();
            }
        });
    </script>
</body>
</html>
